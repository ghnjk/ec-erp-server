# 确认提交销售订单

## 接口信息

- **接口路径**: `/erp_api/sale/submit_sale_order`
- **请求方法**: POST
- **接口描述**: 确认提交销售订单，将订单状态从"待同步"改为"已同步"
- **权限要求**: 需要 `PMS_SALE` 权限

## 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| order_id | int | 是 | 订单ID |

## 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| result | int | 响应码，0表示成功 |
| resultMsg | string | 响应消息 |
| traceId | long | 追踪ID |
| data | object | 空对象 |

## 错误码

| 错误码 | 说明 |
|--------|------|
| 1003 | 参数错误（order_id无效） |
| 1004 | 订单不存在 |
| 1005 | 订单已经提交过了 |
| 1008 | 权限不足 |

## 请求示例

```json
{
  "order_id": 1001
}
```

## 响应示例

### 成功响应

```json
{
  "data": {},
  "result": 0,
  "resultMsg": "success",
  "traceId": 1709991821760
}
```

### 错误响应（订单不存在）

```json
{
  "result": 1004,
  "resultMsg": "订单不存在: 1001",
  "traceId": 1709991821760
}
```

### 错误响应（订单已提交）

```json
{
  "result": 1005,
  "resultMsg": "订单已经提交过了",
  "traceId": 1709991821760
}
```

## 业务逻辑说明

1. 验证用户权限
2. 验证订单ID参数
3. 从数据库查询订单
4. 如果订单不存在，返回错误
5. 检查订单当前状态
6. 如果订单已经是"已同步"状态，返回错误
7. 将订单状态更新为"已同步"
8. 保存到数据库
9. 返回成功响应

## 注意事项

- 此接口专门用于确认提交订单，将状态从"待同步"改为"已同步"
- 订单状态为"已同步"后，再次调用会返回错误
- 已同步的订单表示数据已经同步到其他系统
- 建议在确认订单信息无误后再调用此接口
- 如果需要修改已同步订单的状态，请使用更新订单接口


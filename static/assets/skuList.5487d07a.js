import{_ as U,d as T,r as s,o as G,M as c,a as o,b as P,c as q,e as t,w as u,u as L,g as w,f as C,I as y}from"./index.0c82a46d.js";import{a as O,b as $,c as I}from"./supplierApis.635144e6.js";import{l as M,s as R}from"./skuUtil.902c4579.js";const j=C("br",null,null,-1),H={class:"table-container"},J={name:"SkuList"},Q=T({...J,setup(W){const n=s({skuGroup:"",skuName:"",sku:""}),b=[{width:60,colKey:"erp_sku_image_url",title:"\u5546\u54C1\u56FE\u7247",align:"center"},{width:120,colKey:"sku_group",title:"sku\u5206\u7EC4",align:"center",edit:{component:y,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async a=>{console.log(a),await k(a.newRowData),await i()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku_name",title:"\u5546\u54C1\u540D",align:"center",edit:{component:y,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async a=>{console.log(a),await k(a.newRowData),await i()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku",title:"\u5546\u54C1SKU",align:"center"},{width:120,colKey:"erp_sku_name",title:"BigSeller\u5546\u54C1\u540D",align:"center"},{width:120,colKey:"inventory",title:"\u5E93\u5B58",align:"center"}],m=s([]),r=s(!1),p=s(1),g=s(0),d=s(10),S=[10,20,50,100];G(()=>{i(),M()});const h=({current:a,pageSize:e})=>{p.value=a,d.value=e,i()},k=async a=>{try{await $(a),await c.success("\u66F4\u65B0sku\u6210\u529F\u3002")}catch(e){console.error(e),await c.error(`\u66F4\u65B0sku\u5F02\u5E38: ${e}`)}},B=async()=>{r.value=!0;try{const{update_count:a}=await I();await c.success(`\u6210\u529F\u540C\u6B65${a}\u4E2Asku`)}catch(a){console.error(a),await c.error(`\u67E5\u8BE2sku\u5F02\u5E38: ${a}`)}r.value=!1},i=async()=>{const a={sku_group:n.value.skuGroup,sku_name:n.value.skuName,sku:n.value.sku,current_page:p.value,page_size:d.value};r.value=!0;try{const e=await O(a);g.value=e.total,m.value=e.list}catch(e){console.error(e),await c.error(`\u67E5\u8BE2sku\u5F02\u5E38: ${e}`)}r.value=!1};return(a,e)=>{const V=o("t-select"),_=o("t-form-item"),f=o("t-input"),v=o("t-button"),E=o("t-space"),D=o("t-form"),F=o("t-col"),x=o("t-row"),z=o("t-image"),A=o("t-table"),K=o("t-pagination"),N=o("t-card");return P(),q("div",null,[t(N,null,{default:u(()=>[t(x,null,{default:u(()=>[t(F,{span:12},{default:u(()=>[t(D,{layout:"inline"},{default:u(()=>[t(_,{label:"sku\u5206\u7EC4:",name:"skuGroup"},{default:u(()=>[t(V,{modelValue:n.value.skuGroup,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value.skuGroup=l),options:L(R),clearable:"",filterable:"",placeholder:"-\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7EC4-",style:{width:"150px",display:"inline-block"}},null,8,["modelValue","options"])]),_:1}),t(_,{label:"\u5546\u54C1\u540D:",name:"skuName"},{default:u(()=>[t(f,{modelValue:n.value.skuName,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.skuName=l),placeholder:"\u5546\u54C1\u540D"},null,8,["modelValue"])]),_:1}),t(_,{label:"\u5546\u54C1SKU:",name:"sku"},{default:u(()=>[t(f,{modelValue:n.value.sku,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.sku=l),placeholder:"\u5546\u54C1SKU"},null,8,["modelValue"])]),_:1}),t(_,null,{default:u(()=>[t(E,{size:"small",style:{"align-items":"center","margin-left":"30px"}},{default:u(()=>[t(v,{theme:"primary",onClick:i},{default:u(()=>[w("\u67E5\u8BE2")]),_:1})]),_:1}),t(E,{size:"small",style:{"align-items":"center","margin-left":"30px"}},{default:u(()=>[t(v,{theme:"default",variant:"text",onClick:B},{default:u(()=>[w("\u540C\u6B65\u6240\u6709\u5E93\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),j,C("div",H,[t(A,{columns:b,data:m.value,loading:r.value,bordered:"",hover:"","row-key":"sku",stripe:""},{erp_sku_image_url:u(({row:l})=>[t(z,{src:l.erp_sku_image_url,style:{width:"60px",height:"60px"}},null,8,["src"])]),_:1},8,["data","loading"]),t(K,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=l=>p.value=l),pageSize:d.value,"onUpdate:pageSize":e[4]||(e[4]=l=>d.value=l),"page-size-options":S,total:g.value,class:"pagination",onChange:h},null,8,["modelValue","pageSize","total"])])]),_:1})])}}});var ee=U(Q,[["__file","/Users/jkguo/workspace/ec-erp-static/src/pages/supply/skuList.vue"]]);export{ee as default};

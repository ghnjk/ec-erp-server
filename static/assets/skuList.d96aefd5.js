import{_ as z,d as T,r as i,o as x,M as c,a as l,b as G,c as O,e as u,w as a,u as P,g,f as h,t as I,I as k,h as L}from"./index.87f28df2.js";import{a as R,b as $,c as M}from"./supplierApis.804490b0.js";import{l as j,s as H}from"./skuUtil.04ca1aa8.js";const J=h("br",null,null,-1),Q={class:"table-container"},W={name:"SkuList"},X=T({...W,setup(Y){const o=i({skuGroup:"",skuName:"",sku:""}),b=[{width:60,colKey:"erp_sku_image_url",title:"\u5546\u54C1\u56FE\u7247",align:"center"},{width:120,colKey:"sku_group",title:"sku\u5206\u7EC4",align:"center",edit:{component:k,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await _(e.newRowData),await s()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku_name",title:"\u5546\u54C1\u540D",align:"center",edit:{component:k,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await _(e.newRowData),await s()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku",title:"\u5546\u54C1SKU",align:"center"},{width:120,colKey:"erp_sku_name",title:"BigSeller\u5546\u54C1\u540D",align:"center"},{width:120,colKey:"sku_unit_name",title:"\u91C7\u8D2D\u5355\u4F4D",align:"center",edit:{component:k,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await _(e.newRowData),await s()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku_unit_quantity",title:"\u5355\u4F4D\u7684SKU\u6570",align:"center",edit:{component:L,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await _(e.newRowData),await s()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"inventory",title:"\u5E93\u5B58",align:"center"},{width:120,colKey:"avg_sell_quantity",title:"\u5E73\u5747\u65E5\u9500\u552E\u91CF",align:"center"},{width:120,colKey:"inventory_support_days",title:"\u5E93\u5B58\u652F\u6491\u5929\u6570",align:"center"},{width:120,colKey:"shipping_stock_quantity",title:"\u6D77\u8FD0\u4E2D\u7684SKU",align:"center"}],E=i([]),r=i(!1),d=i(1),f=i(0),p=i(10),C=[10,20,50,100];x(()=>{s(),j()});const D=({current:e,pageSize:t})=>{d.value=e,p.value=t,s()},_=async e=>{try{await $(e),await c.success("\u66F4\u65B0sku\u6210\u529F\u3002")}catch(t){console.error(t),await c.error(`\u66F4\u65B0sku\u5F02\u5E38: ${t}`)}},S=async()=>{r.value=!0;try{const{update_count:e}=await M();await c.success(`\u6210\u529F\u540C\u6B65${e}\u4E2Asku`)}catch(e){console.error(e),await c.error(`\u67E5\u8BE2sku\u5F02\u5E38: ${e}`)}r.value=!1},s=async()=>{const e={sku_group:o.value.skuGroup,sku_name:o.value.skuName,sku:o.value.sku,current_page:d.value,page_size:p.value};r.value=!0;try{const t=await R(e);f.value=t.total,E.value=t.list}catch(t){console.error(t),await c.error(`\u67E5\u8BE2sku\u5F02\u5E38: ${t}`)}r.value=!1};return(e,t)=>{const B=l("t-select"),m=l("t-form-item"),v=l("t-input"),w=l("t-button"),y=l("t-space"),F=l("t-form"),K=l("t-col"),A=l("t-row"),V=l("t-image"),q=l("t-table"),U=l("t-pagination"),N=l("t-card");return G(),O("div",null,[u(N,null,{default:a(()=>[u(A,null,{default:a(()=>[u(K,{span:12},{default:a(()=>[u(F,{layout:"inline"},{default:a(()=>[u(m,{label:"sku\u5206\u7EC4:",name:"skuGroup"},{default:a(()=>[u(B,{modelValue:o.value.skuGroup,"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.skuGroup=n),options:P(H),clearable:"",filterable:"",placeholder:"-\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7EC4-",style:{width:"150px",display:"inline-block"}},null,8,["modelValue","options"])]),_:1}),u(m,{label:"\u5546\u54C1\u540D:",name:"skuName"},{default:a(()=>[u(v,{modelValue:o.value.skuName,"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.skuName=n),placeholder:"\u5546\u54C1\u540D"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u5546\u54C1SKU:",name:"sku"},{default:a(()=>[u(v,{modelValue:o.value.sku,"onUpdate:modelValue":t[2]||(t[2]=n=>o.value.sku=n),placeholder:"\u5546\u54C1SKU"},null,8,["modelValue"])]),_:1}),u(m,null,{default:a(()=>[u(y,{size:"small",style:{"align-items":"center","margin-left":"30px"}},{default:a(()=>[u(w,{theme:"primary",onClick:s},{default:a(()=>[g("\u67E5\u8BE2")]),_:1})]),_:1}),u(y,{size:"small",style:{"align-items":"center","margin-left":"30px"}},{default:a(()=>[u(w,{theme:"default",variant:"text",onClick:S},{default:a(()=>[g("\u540C\u6B65\u6240\u6709\u5E93\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),J,h("div",Q,[u(q,{columns:b,data:E.value,loading:r.value,bordered:"",hover:"","row-key":"sku",stripe:""},{avg_sell_quantity:a(({row:n})=>[g(I(n.avg_sell_quantity.toFixed(2)),1)]),erp_sku_image_url:a(({row:n})=>[u(V,{src:n.erp_sku_image_url,style:{width:"60px",height:"60px"}},null,8,["src"])]),_:1},8,["data","loading"]),u(U,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=n=>d.value=n),pageSize:p.value,"onUpdate:pageSize":t[4]||(t[4]=n=>p.value=n),"page-size-options":C,total:f.value,class:"pagination",onChange:D},null,8,["modelValue","pageSize","total"])])]),_:1})])}}});var ue=z(X,[["__file","/Users/jkguo/workspace/ec-erp-static/src/pages/supply/skuList.vue"]]);export{ue as default};

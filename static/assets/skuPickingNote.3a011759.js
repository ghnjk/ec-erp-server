import{_ as b,d as h,r as o,o as y,M as u,a as g,b as P,c as A,e as d,w as B,f as C,k,I as p,S}from"./index.43b8c280.js";import{c as K,s as F}from"./warehouseApis.361e9bb4.js";const T={class:"table-container"},z={name:"SkuPickingNote"},M=h({...z,setup(O){const f=[{width:80,colKey:"sku",title:"sku",align:"center"},{width:80,colKey:"picking_unit",title:"1\u62E3\u8D27\u5355\u4F4D=\u591A\u5C11sku?",edit:{component:k,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1},align:"center"},{width:60,colKey:"picking_unit_name",title:"\u62E3\u8D27\u5355\u4F4D\u540D",edit:{component:p,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1},align:"center"},{width:80,colKey:"support_pkg_picking",title:"\u662F\u5426\u652F\u6301PKG\u6253\u5305",edit:{component:S,props:{options:[{label:"\u5426",value:!1},{label:"\u662F",value:!0}]},abortEditOnEvent:["onEnter","onBlur","onChange"],on:e=>({onChange:a=>{console.log("status changed",e,a)}}),onEdited:async e=>{console.log(e),await t(e.newRowData)}},align:"center"},{width:80,colKey:"pkg_picking_unit",title:"1 PKG=\u591A\u5C11SKU",edit:{component:k,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[],defaultEditable:!1},align:"center"},{width:60,colKey:"pkg_picking_unit_name",title:"PKG\u6253\u5305\u5355\u4F4D\u540D",edit:{component:p,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[],defaultEditable:!1},align:"center"},{width:80,colKey:"picking_sku_name",title:"\u62E3\u8D27SKU\u540D",edit:{component:p,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1},align:"center"}],_=o([]),s=o(!1),i=o(1),E=o(0),l=o(10),m=[10,20,50,100];y(async()=>{await r()});const w=async({current:e,pageSize:a})=>{i.value=e,l.value=a,await r()},r=async()=>{const e={current_page:i.value,page_size:l.value};s.value=!0;try{const a=await K(e);E.value=a.total,_.value=a.list}catch(a){console.error(a),await u.error(`\u67E5\u8BE2\u5907\u6CE8\u5F02\u5E38: ${a}`)}s.value=!1},t=async e=>{let a=!0;if(e.picking_unit<=0&&(u.info(`${e.sku} picking_unit \u672A\u586B`),a=!1),e.picking_unit_name===""&&(u.info(`${e.sku} picking_unit_name \u672A\u586B`),a=!1),e.picking_sku_name===""&&(u.info(`${e.sku} picking_sku_name \u672A\u586B`),a=!1),!a)return!1;try{return await F({manual_mark_sku_list:[e]}),await r(),!0}catch(n){return console.error(n),await u.error(`\u4FDD\u5B58sku\u62E3\u8D27\u5907\u6CE8\u5931\u8D25: ${n}`),!1}};return(e,a)=>{const n=g("t-table"),v=g("t-pagination"),D=g("t-card");return P(),A("div",null,[d(D,null,{default:B(()=>[C("div",T,[d(n,{columns:f,data:_.value,loading:s.value,bordered:"",hover:"","row-key":"sku",stripe:""},null,8,["data","loading"]),d(v,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=c=>i.value=c),pageSize:l.value,"onUpdate:pageSize":a[1]||(a[1]=c=>l.value=c),"page-size-options":m,total:E.value,class:"pagination",onChange:w},null,8,["modelValue","pageSize","total"])])]),_:1})])}}});var V=b(M,[["__file","/Users/jkguo/workspace/ec-erp-static/src/pages/warehouse/skuPickingNote.vue"]]);export{V as default};

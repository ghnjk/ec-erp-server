import{_ as y,d as C,r as o,o as P,M as i,a as r,b as A,c as B,e as c,w as E,f as K,k as m,I as p,S}from"./index.003db0ae.js";import{c as F,s as T}from"./warehouseApis.42547a98.js";const z={class:"table-container"},M={name:"SkuPickingNote"},O=C({...M,setup(q){const f=[{width:60,colKey:"erp_sku_image_url",title:"\u5546\u54C1\u56FE\u7247",align:"center"},{width:60,colKey:"erp_sku_name",title:"sku",align:"center"},{width:80,colKey:"sku",title:"sku",align:"center"},{width:80,colKey:"picking_unit",title:"1\u62E3\u8D27\u5355\u4F4D=\u591A\u5C11sku?",edit:{component:m,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1},align:"center"},{width:60,colKey:"picking_unit_name",title:"\u62E3\u8D27\u5355\u4F4D\u540D",edit:{component:p,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1},align:"center"},{width:80,colKey:"picking_sku_name",title:"\u62E3\u8D27SKU\u540D",edit:{component:p,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1},align:"center"},{width:80,colKey:"support_pkg_picking",title:"\u662F\u5426\u652F\u6301PKG\u6253\u5305",edit:{component:S,props:{options:[{label:"\u5426",value:!1},{label:"\u662F",value:!0}]},abortEditOnEvent:["onEnter","onBlur","onChange"],on:e=>({onChange:a=>{console.log("status changed",e,a)}}),onEdited:async e=>{console.log(e),await t(e.newRowData)},defaultEditable:!0},align:"center"},{width:80,colKey:"pkg_picking_unit",title:"1 PKG=\u591A\u5C11SKU",edit:{component:m,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[],defaultEditable:!1},align:"center"},{width:60,colKey:"pkg_picking_unit_name",title:"PKG\u6253\u5305\u5355\u4F4D\u540D",edit:{component:p,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async e=>{console.log(e),await t(e.newRowData)},rules:[],defaultEditable:!1},align:"center"}],_=o([]),g=o(!1),l=o(1),k=o(0),s=o(10),w=[10,20,50,100];P(async()=>{await d()});const v=async({current:e,pageSize:a})=>{l.value=e,s.value=a,await d()},d=async()=>{const e={current_page:l.value,page_size:s.value};g.value=!0;try{const a=await F(e);k.value=a.total,_.value=a.list}catch(a){console.error(a),await i.error(`\u67E5\u8BE2\u5907\u6CE8\u5F02\u5E38: ${a}`)}g.value=!1},t=async e=>{let a=!0;if(e.picking_unit<=0&&(i.info(`${e.sku} picking_unit \u672A\u586B`),a=!1),e.picking_unit_name===""&&(i.info(`${e.sku} picking_unit_name \u672A\u586B`),a=!1),e.picking_sku_name===""&&(i.info(`${e.sku} picking_sku_name \u672A\u586B`),a=!1),!a)return!1;try{return await T({manual_mark_sku_list:[e]}),await d(),!0}catch(n){return console.error(n),await i.error(`\u4FDD\u5B58sku\u62E3\u8D27\u5907\u6CE8\u5931\u8D25: ${n}`),!1}};return(e,a)=>{const n=r("t-image"),h=r("t-table"),D=r("t-pagination"),b=r("t-card");return A(),B("div",null,[c(b,null,{default:E(()=>[K("div",z,[c(h,{columns:f,data:_.value,loading:g.value,bordered:"",hover:"","row-key":"sku",stripe:""},{erp_sku_image_url:E(({row:u})=>[c(n,{src:u.erp_sku_image_url,style:{width:"60px",height:"60px"}},null,8,["src"])]),_:1},8,["data","loading"]),c(D,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=u=>l.value=u),pageSize:s.value,"onUpdate:pageSize":a[1]||(a[1]=u=>s.value=u),"page-size-options":w,total:k.value,class:"pagination",onChange:v},null,8,["modelValue","pageSize","total"])])]),_:1})])}}});var U=y(O,[["__file","/Users/jkguo/workspace/ec-erp-static/src/pages/warehouse/skuPickingNote.vue"]]);export{U as default};

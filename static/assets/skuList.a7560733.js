import{_ as z,d as x,r as s,o as T,M as _,a as u,b as A,c as G,e as t,w as l,u as P,g as q,f as w,I as v}from"./index.11abf68f.js";import{a as L,b as O}from"./supplierApis.6d25968c.js";import{l as I,s as M}from"./skuUtil.f8bc9a5a.js";const R=w("br",null,null,-1),$={class:"table-container"},j={name:"SkuList"},H=x({...j,setup(J){const n=s({skuGroup:"",skuName:"",sku:""}),E=[{width:60,colKey:"erp_sku_image_url",title:"\u5546\u54C1\u56FE\u7247",align:"center"},{width:120,colKey:"sku_group",title:"sku\u5206\u7EC4",align:"center",edit:{component:v,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async a=>{console.log(a),await k(a.newRowData),await r()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku_name",title:"\u5546\u54C1\u540D",align:"center",edit:{component:v,props:{autofocus:!0},validateTrigger:"change",abortEditOnEvent:["onEnter","onBlur"],onEdited:async a=>{console.log(a),await k(a.newRowData),await r()},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!1}},{width:120,colKey:"sku",title:"\u5546\u54C1SKU",align:"center"},{width:120,colKey:"erp_sku_name",title:"BigSeller\u5546\u54C1\u540D",align:"center"},{width:120,colKey:"inventory",title:"\u5E93\u5B58",align:"center"}],m=s([]),d=s(!1),i=s(1),g=s(0),c=s(10),b=[10,20,50,100];T(()=>{r(),I()});const y=({current:a,pageSize:e})=>{i.value=a,c.value=e,r()},k=async a=>{try{await O(a),await _.success("\u66F4\u65B0sku\u6210\u529F\u3002")}catch(e){console.error(e),await _.error(`\u66F4\u65B0sku\u5F02\u5E38: ${e}`)}},r=async()=>{const a={sku_group:n.value.skuGroup,sku_name:n.value.skuName,sku:n.value.sku,current_page:i.value,page_size:c.value};d.value=!0;try{const e=await L(a);g.value=e.total,m.value=e.list}catch(e){console.error(e),await _.error(`\u67E5\u8BE2sku\u5F02\u5E38: ${e}`)}d.value=!1};return(a,e)=>{const C=u("t-select"),p=u("t-form-item"),f=u("t-input"),h=u("t-button"),S=u("t-space"),V=u("t-form"),B=u("t-col"),D=u("t-row"),F=u("t-image"),K=u("t-table"),N=u("t-pagination"),U=u("t-card");return A(),G("div",null,[t(U,null,{default:l(()=>[t(D,null,{default:l(()=>[t(B,{span:12},{default:l(()=>[t(V,{layout:"inline"},{default:l(()=>[t(p,{label:"sku\u5206\u7EC4:",name:"skuGroup"},{default:l(()=>[t(C,{modelValue:n.value.skuGroup,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.skuGroup=o),options:P(M),clearable:"",filterable:"",placeholder:"-\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7EC4-",style:{width:"150px",display:"inline-block"}},null,8,["modelValue","options"])]),_:1}),t(p,{label:"\u5546\u54C1\u540D:",name:"skuName"},{default:l(()=>[t(f,{modelValue:n.value.skuName,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.skuName=o),placeholder:"\u5546\u54C1\u540D"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5546\u54C1SKU:",name:"sku"},{default:l(()=>[t(f,{modelValue:n.value.sku,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.sku=o),placeholder:"\u5546\u54C1SKU"},null,8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(S,{size:"small",style:{"align-items":"center","margin-left":"30px"}},{default:l(()=>[t(h,{theme:"primary",onClick:r},{default:l(()=>[q("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),R,w("div",$,[t(K,{columns:E,data:m.value,loading:d.value,bordered:"",hover:"","row-key":"sku",stripe:""},{erp_sku_image_url:l(({row:o})=>[t(F,{src:o.erp_sku_image_url,style:{width:"60px",height:"60px"}},null,8,["src"])]),_:1},8,["data","loading"]),t(N,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value=o),pageSize:c.value,"onUpdate:pageSize":e[4]||(e[4]=o=>c.value=o),"page-size-options":b,total:g.value,class:"pagination",onChange:y},null,8,["modelValue","pageSize","total"])])]),_:1})])}}});var Y=z(H,[["__file","/Users/jkguo/workspace/ec-erp-static/src/pages/supply/skuList.vue"]]);export{Y as default};
